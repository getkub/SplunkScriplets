- name: "DELETE saved searches"
  uri:
    url: "{{splunk_uri}}:8089/servicesNS/nobody/myapp/saved/searches/{{savedsearch_name}}"
    method: DELETE
    user: xyz
    password: yyyyy
    status_code: [200, 201,404]
    force_basic_auth: yes
    validate_certs: no
    body_format: form-urlencoded
    return_content: true


- name: "CURL request to create SavedSearch"
  command: |
      /usr/bin/curl -u {{creds}} -o /dev/null -k {{splunk_uri}}:8089/servicesNS/nobody/myapp/saved/searches
      -d name="{{savedsearch_name}}"
      --data-urlencode description="{{description}}"
      --data-urlencode search="{{search}}"
      --data-urlencode disabled=false
      --data-urlencode is_scheduled=1
      --data-urlencode cron_schedule="{{cron}}"
